import{a as y,i as v}from"./assets/vendor-CyHMW-y7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=document.querySelector(this.getAttribute("href"));o&&o.scrollIntoView({behavior:"smooth"}),m()})});const C=document.querySelector(".burger-btn"),f=document.querySelector(".mobile-menu"),I=document.querySelector(".mobile-close-btn");C.addEventListener("click",()=>{f.classList.add("is-open"),document.body.classList.add("no-scroll")});I.addEventListener("click",m);f.addEventListener("click",e=>{e.target===f&&m()});document.addEventListener("keydown",e=>{e.key==="Escape"&&m()});function m(){f.classList.remove("is-open"),document.body.classList.remove("no-scroll")}const n={categories:document.querySelector(".our-furnitures__categories"),categoriesItems:document.querySelectorAll(".categories__item"),categoriesTumbs:document.querySelectorAll(".categories__thumb"),furnitures:document.querySelector(".our-furnitures__list"),loadMore:document.querySelector(".our-furnitures__load-more-btn"),modal:document.querySelector(".modal"),modalFurniture:document.querySelector(".modal-furniture"),openOredrBtn:document.querySelector(".modal-furniture__btn"),modalCloseBtn:document.querySelector(".modal__close-btn"),spinner:document.querySelector(".loader-box")};function T(e){n.categoriesItems.forEach((t,o)=>{const i=e[o],r=t.querySelector(".categories__thumb"),s=`<p class="categories__item__name" data-id="${i._id??"1"}">${i.name}</p>`;r.insertAdjacentHTML("beforeend",s)})}function h(e){return e.map(({_id:t,name:o,images:i,price:r,color:s})=>`
            <li class="furnitures__item" data-id="${t}">
                <img class="furnitures__image" src="${i[0]}" alt="${o}" height="277"/>
                <p class="furnitures__title">${o}</p>
                <ul class="furnitures__colors__list">${$(s)}</ul>
                <p class="furnitures__price">${r} грн</p>
                <button class="furnitures__details-btn">Детальніше</button>
            </li>
        `).join("")}function F({_id:e,name:t,images:o,description:i,price:r,color:s,category:u,rate:p,sizes:w}){return`
        <ul class="modal-furniture__image-list">${o.map(k=>`
      <li class="modal-furniture__image">
        <div class="modal-furniture__thumb">
          <img class="modal-furniture__img" src=${k} alt="${t}" width="166" height="122">
        </div>
      </li>
    `).join("")}</ul>
        <div class="modal-furniture__content data-id="${e}">
            <p class="modal-furniture__title">${t}</p>
            <p class="modal-furniture__category">${u.name}</p>
            <p class="modal-furniture__price">${r} грн</p>
            <div class="modal-furniture__rate">
                <span class="rating" data-rate="${p}">★★★★★</span>
            </div>
            <p class="modal-furniture__color-title">Колір</p>
            <ul class="furnitures__colors__list">${$(s)}</ul>
            <p class="modal-furniture__description">${i}</p>
            <p class="modal-furniture__sizes">Розміри: ${w}</p>
        </div>
  `}function $(e){return e.map(t=>`
            <li class="furnitures__colors">
                <div class="furnitures__colors__item" style="background-color: ${t};"></div>
            </li>
        `).join("")}let a=[];n.modalCloseBtn.addEventListener("click",b);n.modal.addEventListener("click",e=>{e.target===n.modal&&b()});n.modal.addEventListener("click",x);async function A(e){document.body.classList.add("body--no-scroll");const t=e.target.closest(".furnitures__details-btn");if(!t)return;const o=t.closest(".furnitures__item");if(!o)return;const i=o.dataset.id,r=a.find(({_id:s})=>s===i);console.log(r),n.modalFurniture.innerHTML=F(r),n.modal.classList.add("modal--is-open"),document.addEventListener("keydown",E),document.querySelectorAll(".rating").forEach(s=>{const p=parseFloat(s.dataset.rate)/5*100;s.style.setProperty("--rating-percent",`${p}%`)})}function b(){n.modal.classList.remove("modal--is-open"),n.modalFurniture.innerHTML="",document.removeEventListener("keydown",E),document.body.classList.remove("body--no-scroll")}function E(e){e.key==="Escape"&&b()}function x(e){const t=e.target.closest(".furnitures__colors__item");t&&(document.querySelectorAll(".furnitures__colors__item").forEach(o=>o.classList.remove("furnitures__colors__item--pressed")),t.classList.add("furnitures__colors__item--pressed"))}const B=async()=>{const e=await y.get("https://furniture-store.b.goit.study/api/categories");return console.log(e.data),e.data},L=async(e=1)=>{const t=await y.get("https://furniture-store.b.goit.study/api/furnitures",{params:{limit:8,page:e}});return console.log(t.data),t.data},M=async(e,t=1)=>{const o=await y.get("https://furniture-store.b.goit.study/api/furnitures",{params:{category:e,limit:8,page:t}});return console.log(o.data),o.data};function O(){n.categoriesTumbs.forEach(e=>e.classList.remove("categories__thumb--active"))}function S(e){const{page:t,limit:o,totalItems:i}=e;t*o<i?n.loadMore.classList.remove("is-hidden"):n.loadMore.classList.add("is-hidden")}function _(){n.spinner.classList.remove("loader-box-hidden")}function g(){n.spinner.classList.add("loader-box-hidden")}function q(e){v.warning({messageColor:"#fff",iconUrl:caution,iconColor:"#ffffffff",maxWidth:"350px",position:"topRight",color:"#ffa000",message:e})}function d(e){v.error({messageColor:"#fff",iconColor:"#fff",maxWidth:"350px",iconUrl:d,position:"topRight",color:"#ef4040",message:e})}let l=1,c=null;async function H(e){var i;const t=e.target.closest("li");if(!t)return;const o=t.querySelector(".categories__thumb");if(!o.classList.contains("categories__thumb--active")){l=1,a.length=0,_(),O(),o.classList.add("categories__thumb--active"),c=((i=t.querySelector(".categories__item__name"))==null?void 0:i.dataset.id)||null;try{const r=c&&c!=="1"?await M(c,l):await L(l);if(r.furnitures.length===0){q("Sorry, there are no furnitures.");return}n.furnitures.innerHTML=h(r.furnitures),a.push(...r.furnitures),S(r),a.length>=+r.totalItems&&alert("Усі меблі завантажено!")}catch(r){d(`Помилка при завантаженні меблів по категоріях: ${r}`)}finally{g()}}}async function P(){l++,_();try{const e=c&&c!=="1"?await M(c,l):await L(l);if(e.furnitures.length===0){q("Sorry, there are no furnitures.");return}n.furnitures.insertAdjacentHTML("beforeend",h(e.furnitures)),a.push(...e.furnitures),S(e),j(),a.length>=+e.totalItems&&alert("Усі меблі завантажено!")}catch(e){d(`Помилка при завантаженні додаткових меблів: ${e}`)}finally{g()}}function j(){const e=n.furnitures.lastElementChild;e&&e.scrollIntoView({behavior:"smooth",block:"start"})}n.categories.addEventListener("click",H);n.furnitures.addEventListener("click",A);n.loadMore.addEventListener("click",P);async function N(){_();try{const e=await B(),t=[{_id:1,name:"Всі товари"},...e];T(t)}catch(e){d(`Помилка при отриманні категорій: ${e}`)}finally{g()}D()}async function D(){_();try{const e=await L();a.push(...e.furnitures),console.log("data",a),n.furnitures.innerHTML=h(e.furnitures)}catch(e){d(`Помилка при отриманні меблів: ${e}`)}finally{g()}}N();
//# sourceMappingURL=index.js.map
